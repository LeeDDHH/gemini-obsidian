この記事は、ニフティ株式会社の渡邊大介氏が、同社のトップページ開発で得た知見を基に、Next.jsを使用したウェブサイトの表示速度を改善する具体的な方法を紹介したものです。

まず、ページの読み込み負荷の大きな要因である画像ファイルへの対策として、Next.jsの`next/image`コンポーネントの活用を挙げています。 通常、ウェブ開発では画像サイズを圧縮したり、軽量なフォーマットに変換したりする手間が発生しますが、`next/image`は、指定された画像をGoogleが開発し[1]た次世代画像フォーマットであるWebPに自動で変換します。 記事内の比較例では、通常の`<img>`タグで表示した場合と比較して、画質の劣化を感じさせることなくファイルサイズを1/10以下に削減できており、その効果の高さが示されています。

次に、JavaScriptの読み込み量を削減する手法として`next/dynamic`（動的インポート）を紹介しています。 これは[1]、トグルメニューやモーダルウィンドウのように、ページの初回表示時には必要ないコンポーネントを、ユーザーが実際にその機能を操作したタイミングで読み込むようにする仕組みです。 これにより、初期ロードのデータ量が減り、表示開始までの時間を短縮できます。

さらに、パフォーマンスに大きな影響を与えがちな外部スクリプトの読み込みについては、`next/script`コンポーネントが有効であると述べています。 このコンポーネントの`strategy`プロパティ（`beforeInteractive`, `afterInteractive`, `lazyOnload`）を使い分ける[1]ことで、スクリプトの読み込みタイミングを制御できます。 例えば、広告などすぐに実行したいスクリプトは最優先で、チャットボットのようにページの表示が完了してからでよいものは後から読み込む、といった優先順位付けを自動で行い、レンダリングを最適化します。

最後に、パフォーマンス改善のボトルネックを特定するために「バンドルサイズの可視化」の重要性を強調しています。 `@next/bundle-analyzer`というツールを導入することで、アプリケーションを構成する各パッケージやコンポーネント[1]の容量を視覚的に確認できます。 記事では、複数の日付処理ライブラリを比較し、同じ機能でもライブラリによってバンドルサイズが大きく異なることを実例で示しており、ライブラリ選定の慎重な判断がパフォーマンスに寄与すると結論付けています。

まとめとして、これらの手法はNext.j[1]sを採用しているサイトであればすぐに導入できるものであり、パフォーマンス改善においてはLightHouse CIのようなツールで現状を数値化・可視化することが不可欠であると締めくくられています。[1][1][1][1][1][1][1][1][1]

Sources:
[1] Next.jsを使ったサイトの表示速度改善 - NIFTY engineering (https://engineering.nifty.co.jp/blog/13820)