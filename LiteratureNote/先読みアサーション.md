JavaScriptの正規表現における「先読みアサーション」は、特定のパターンの直後に続く文字列を検証するための強力な機能です。これには「肯定先読み `(?=pattern)`」と「否定先読み `(?!pattern)`」の2種類が存在します。

### 先読みアサーションの基本

先読みアサーションの最大の特徴は、指定したパターンが後続の文字列に一致するかどうかを「確認」するだけで、文字列自体は消費せず、マッチ結果にも含まれない点です。 正規表現のマッチ処理は通常、左から右に進みますが、先読みアサーションが評価された後も、マッチの現在位置は変わりません。

*   *[1]*肯定先読み `(?=pattern)`**: 現在位置の直後にあるテキストが `pattern` に一致する場合に成功します。 例えば、`/\d+(?=円)/` という正規表現は、「円」という文字が続く数字の並びにマッチしますが、結果に「円」は含まれません。 「100円」という文字列からは「100」だけが取得できます。

*   **否定先読み `(?!pattern)`**: 現在位置の直後にあるテキストが `pattern` に一致*しない*場合に成功します。 これは特定の条件を除外する際に非常に便利です。

### 実践的な使用例

先読みアサーシ[1]ョンは、単純な文字列検索以上に複雑な条件を指定する際に役立ちます。

1.  **結果に含めずに後続の文字列を検証する**:
    ある文字列が特定の句読点（コンマやピリオドなど）で終わっていることを確認しつつ、その句読点自体は結果から除外したい場合に使用できます。 `/^.*?(?=[,.])/` は、最初のコンマかピリオドが現れるまでのすべての文字[1]列に一致します。

2.  **パターンの交差（AND条件）と差集合（NOT条件）**:
    複数の条件を組み合わせる「交差」や、ある条件を除外する「差集合」を表現できます。
    *   **差集合（Xであり、Yではない）**: JavaScriptの予約語（例: `b[1]reak`, `case`）ではない有効な識別子を検出する場合、`^(?!(?:break|case)$)[a-zA-Z_]\w*` のように記述します。 これは、まず否定先読みで予約語でないことを確認し、その後に有効な識別子のパターンでマッチさせています。
    *   **交差（Xであり、Yでもある）**: ある文字が「ASCII文字」[1]であり、かつ「識別子の一部として使える文字」でもある、といった条件を `^(?=\p{ASCII}$)\p{ID_Start}$/u` のように複数の先読みを連結して表現できます。

### 注意点

先読みアサーション内ではキャプチャグループを使用できますが、他の正規表現とは異なり、アサーション内での選択はバックトラック（後戻りして再試行）されないという特徴があります。 このため、キャプチャグループと後方参照を組み合わせる際には、意図しない[1]結果になる可能性があり注意が必要です。

この機能は、すべての主要なブラウザで古くからサポートされており、安心して使用することができます。[1][1][1][1][1][1][1][1][1]

Sources:
[1] 先読みアサーション: (?=...), (?!...) - JavaScript - MDN Web Docs (https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Lookahead_assertion)